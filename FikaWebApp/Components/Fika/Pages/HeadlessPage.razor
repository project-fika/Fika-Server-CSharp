@page "/Fika/Manage/Headless"

@using FikaShared

@if (_loading)
{
	<MudStack AlignItems="AlignItems.Center" Row="false" >
		<MudProgressCircular Indeterminate="true" />
		<MudText>Waiting for server...</MudText>
	</MudStack>
}
else
{
	<MudDataGrid Items="_headlessClients" Breakpoint="Breakpoint.None" RowsPerPage="10" SortMode="SortMode.Single">
		<Columns>
			<PropertyColumn Property="p => p.ProfileId" />
			<PropertyColumn Property="p => p.Nickname" />
			<PropertyColumn Property="p => p.State" />
			<PropertyColumn Property="p => p.Players" />
			<TemplateColumn>
				<CellTemplate Context="row">
					<MudButton Variant="Variant.Filled" Color="Color.Primary" Disabled="@(row.Item.State is Enums.EHeadlessState.NotReady)" OnClick="@(() => RestartHeadless(row.Item))">Restart</MudButton>
				</CellTemplate>
			</TemplateColumn>
		</Columns>
		<PagerContent>
			<MudDataGridPager T="OnlineHeadless"/>
		</PagerContent>
	</MudDataGrid>
}